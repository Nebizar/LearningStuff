$MOD842
ORG 0
	JMP MAIN
ORG 03h
	JMP INTER
ORG 0Bh
	JMP TIMER

MAIN:
	SETB EA
	SETB EX0
	SETB ET0
	MOV A, #0
	MOV TMOD, #00000001B
	MOV R1, #0
LOOP:	
	MOV P2, #10000001B
	;SETB TR0
	CALL DELAY
	CJNE R1, #255,  LOOP
CHANGE:
	MOV R4, #30
	MOV R5, #3
	MOV P2, #01000001B
	;SETB TR0
	CALL DELAY
	MOV P2, #00010001B
	;SETB TR0
	CALL DELAY
	;CALL DELAY
GREEN:
	MOV P2, #00011000B
	;SETB TR0
	CALL DELAY
	DJNZ R4, GREEN
MRYG:
	MOV P2, #00010000B
	;SETB TR0
	CALL DELAY
	MOV P2, #00011000B
	;SETB TR0
	CALL DELAY
	DJNZ R5, MRYG
	MOV P2, #00010001B
	;SETB TR0
	CALL DELAY
	;CALL DELAY
	MOV P2, #01000001B
	;SETB TR0
	CALL DELAY
	CJNE R1, #0, CHANGE
	JMP LOOP
		
	
	
INTER:
	CPL A
	MOV R1, A
	RETI

TIMER:
	DEC R0
	RETI

DELAY:
	MOV R0, #1
	SETB TR0
	DJNZ R0, $
	MOV R0, #1
	CLR TR0

END

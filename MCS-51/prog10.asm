$MOD842
ORG 0
JMP MAIN

ORG 53H
	MOV SEC, #0
	INC R0
	CJNE R0, #00010110B, WYJ
	INC R1
	MOV R0, #00010000B
	CJNE R1, #01101010B, WYJ
	INC R2
	MOV R1, #01100000B
	CJNE R2, #00110110B, WYJ
	MOV R2, #00110000B
	INC R5
	MOV R4, #255
	CJNE R5, #00001010B, YOLO
	MOV R5, #0
	INC R6
YOLO:
	CJNE R6, #00010010B, WYJ
	CJNE R5, #00000011B, WYJ
	MOV R5, #0
	MOV R6, #0
WYJ:	
	RETI

MAIN:
	SETB EA
	MOV SEC, #0
	;MOV HOUR, #0
	MOV R0, #00010000B
	MOV R1, #01100000B
	MOV R2, #00110000B
	MOV R3, #00000000B
	MOV R4, #0
	MOV R5, #00000010B
	MOV R6, #00010010B
	MOV IEIP2, #0FFh
	MOV TIMECON, #01000011B
	MOV INTVAL, #10
LOOP:
	MOV P2, SEC
	CALL DELAY
	MOV P2, R0
	CALL DELAY
	MOV P2, R1
	CALL DELAY
	MOV P2, R2
	CALL DELAY
	CJNE R4, #255, RETURN
HOURS:
	MOV P2, R5
	CALL DELAY
	MOV P2, R6
	CALL DELAY
	;DJNZ R5, HOURS2
	DJNZ R4, HOURS
RETURN:
	JMP LOOP
	

DELAY:
	MOV R7, #255
	DJNZ R7, $
	RET
	
END
